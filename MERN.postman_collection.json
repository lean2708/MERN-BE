{
	"info": {
		"_postman_id": "644d81a6-5fb2-4c6e-b2cb-2233cccca54e",
		"name": "MERN",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "36548365"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"lean270804@gmail.com\",\r\n  \"password\": \"123456\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/signin"
					},
					"response": []
				},
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Le Van An\",\r\n  \"email\": \"lean270804@gmail.com\",\r\n  \"password\": \"123456\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/signup"
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/userLogout"
					},
					"response": []
				},
				{
					"name": "ForgotPassword",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"email\": \"lean270804@gmail.com\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/forgot-password"
					},
					"response": []
				},
				{
					"name": "Verify Code",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"email\": \"lean270804@gmail.com\",\r\n    \"otp\": 123456\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/forgot-password/verify-otp"
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"email\": \"lean270804@gmail.com\",\r\n    \"resetToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OGVkYmVhMzlhYWY5YTdlNmZkZWYxNmMiLCJlbWFpbCI6ImxlYW4yNzA4MDRAZ21haWwuY29tIiwiaWF0IjoxNzYwNTg1MDkwLCJleHAiOjE3NjA1ODU2OTB9.qj6vLp2NRdQ2T99l5-0zCGK4DozAlLlEVpdw4adYRRw\",\r\n    \"newPassword\": \"12345678\",\r\n    \"confirmPassword\": \"12345678\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/forgot-password/reset-password"
					},
					"response": []
				}
			]
		},
		{
			"name": "user",
			"item": [
				{
					"name": "Get user details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "token",
								"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OGRmM2Y0ZDA3NDliZmJlNDI5MTYyZWQiLCJlbWFpbCI6InRlc3RAZ21haWwuY29tIiwiaWF0IjoxNzU5OTc2ODU2LCJleHAiOjE3NjAwMDU2NTZ9.DN93h88yZdNoKOayInzNcfN-Ys32yo-z9KroL_2jhbs",
								"type": "text",
								"disabled": true
							}
						],
						"url": "http://localhost:8080/api/user-details"
					},
					"response": []
				},
				{
					"name": "Get all user",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/all-user"
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"userId\": \"68fba0293ac59c6ef1afbd65\",\r\n    \"name\": \"An B52\",\r\n    \"gender\": \"Nam\",\r\n    \"dateOfBirth\": \"2004-08-27\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/update-user"
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"currentPassword\": \"123456\",\r\n    \"newPassword\": \"12345678\",\r\n    \"confirmPassword\": \"12345678\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/change-password"
					},
					"response": []
				}
			]
		},
		{
			"name": "product",
			"item": [
				{
					"name": "Create Product",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"productName\": \"iPhone 15 Pro Max\",\r\n    \"brandName\": \"Apple\",\r\n    \"category\": \"Electronics\",\r\n    \"productImage\": [\r\n        \"https://example.com/images/iphone15promax-front.jpg\",\r\n        \"https://example.com/images/iphone15promax-back.jpg\",\r\n        \"https://example.com/images/iphone15promax-side.jpg\"\r\n    ],\r\n    \"description\": \"iPhone 15 Pro Max với chip A17 Pro mạnh mẽ, camera 48MP, thiết kế titanium sang trọng và cổng USB-C tiện lợi. Trải nghiệm mượt mà và hiệu suất vượt trội.\",\r\n    \"price\": 36990000,\r\n    \"sellingPrice\": 32990000\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/upload-product"
					},
					"response": []
				},
				{
					"name": "Get All Product",
					"request": {
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/get-product"
					},
					"response": []
				},
				{
					"name": "Update Product",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{   \r\n    \"_id\" : \"68e726c287777366828871db\",\r\n    \"productName\": \"iPhone 18 Pro Max\",\r\n    \"brandName\": \"Apple\",\r\n    \"category\": \"Electronics\",\r\n    \"productImage\": [\r\n        \"https://example.com/images/iphone15promax-front.jpg\",\r\n        \"https://example.com/images/iphone15promax-back.jpg\",\r\n        \"https://example.com/images/iphone15promax-side.jpg\"\r\n    ],\r\n    \"description\": \"iPhone 15 Pro Max với chip A17 Pro mạnh mẽ, camera 48MP, thiết kế titanium sang trọng và cổng USB-C tiện lợi. Trải nghiệm mượt mà và hiệu suất vượt trội.\",\r\n    \"price\": 36990000,\r\n    \"sellingPrice\": 32990000\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/update-product"
					},
					"response": []
				},
				{
					"name": "Fetch one product per category",
					"request": {
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/get-categoryProduct"
					},
					"response": []
				},
				{
					"name": "Fetch All Product By Category",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"category\": \"Electronics\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/category-product"
					},
					"response": []
				},
				{
					"name": "Get Product Details",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"productId\" : \"68e726c287777366828871db\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/product-details"
					},
					"response": []
				},
				{
					"name": "Search Product",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/api/search?q=iphone",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "iphone"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filter Product",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"category\": [\r\n        \"Electronics\",\r\n        \"Cosmetics\",\r\n        \"Household\"\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/filter-product"
					},
					"response": []
				}
			]
		},
		{
			"name": "Cart",
			"item": [
				{
					"name": "Add Product To Cart",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"productId\": \"68ebb7ad42121d51e89ad61a\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/addtoCart"
					},
					"response": []
				},
				{
					"name": "Count Cart Item",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/countAddToCartProduct"
					},
					"response": []
				},
				{
					"name": "Fetch All Cart Item",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/view-cart-product"
					},
					"response": []
				},
				{
					"name": "Update Cart Item",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"_id\": \"68e86c9f5378bfec01a4daf2\",\r\n    \"quantity\": 3\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/update-cart-product"
					},
					"response": []
				},
				{
					"name": "Delete Cart Item",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"_id\": \"68e86c9f5378bfec01a4daf2\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/delete-cart-product"
					},
					"response": []
				}
			]
		},
		{
			"name": "Address",
			"item": [
				{
					"name": "Create Address",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"0987654321\",\n    \"addressDetail\": \"123 Đường ABC, Phường 1, Quận 2, TP. HCM\",\n    \"isDefault\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/address",
						"description": "Tạo một địa chỉ mới cho user đã đăng nhập. Tự động lưu ID của địa chỉ này vào biến `addressId`."
					},
					"response": []
				},
				{
					"name": "Get All List Address",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/address",
						"description": "Lấy tất cả địa chỉ của user đã đăng nhập. Địa chỉ default sẽ được ưu tiên lên đầu."
					},
					"response": []
				},
				{
					"name": "Update Address By Address Id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"0123456789\",\n    \"addressDetail\": \"456 Đường XYZ, Phường 3, Quận 4, Hà Nội\",\n    \"isDefault\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/address/{{addressId}}",
						"description": "Cập nhật địa chỉ có ID được lưu trong biến `addressId`. Hãy chạy request 'Tạo địa chỉ mới' trước."
					},
					"response": []
				},
				{
					"name": "Delete Address By Id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "DELETE",
						"header": [],
						"url": "http://localhost:8080/api/address/{{addressId}}",
						"description": "Xóa địa chỉ có ID được lưu trong biến `addressId`. Hãy chạy request 'Tạo địa chỉ mới' trước."
					},
					"response": []
				}
			]
		},
		{
			"name": "order",
			"item": [
				{
					"name": "1. Create New Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{TOKEN}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"shippingAddressId\": \"68f5a44ddbd1db1f8a8565e7\",\n    \"paymentMethod\": \"CASH\",\n    \"products\": [\n        {\n            \"productId\": \"68f5a444dbd1db1f8a8565e3\",\n            \"quantity\": 2\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "http://localhost:8080/api/order",
						"description": "Tạo một đơn hàng mới. API này xử lý cả 'Mua Ngay' và 'Đặt hàng từ giỏ'.\n\n**BẮT BUỘC:** Bạn phải thay thế giá trị cho biến `addressId` và `productId` trong tab 'Variables' của Collection trước khi chạy."
					},
					"response": []
				},
				{
					"name": "2. Get My Orders by Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/api/order/by-status?status=PENDING",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"order",
								"by-status"
							],
							"query": [
								{
									"key": "status",
									"value": "PENDING"
								}
							]
						},
						"description": "Lấy danh sách các đơn hàng của bạn theo một trạng thái cụ thể. Bạn có thể thay đổi giá trị `status` trong 'Params' (pending, processing, delivered, etc.)."
					},
					"response": []
				},
				{
					"name": "3. Get Order Details (uses ID from Create)",
					"request": {
						"method": "GET",
						"header": [],
						"url": "http://localhost:8080/api/order/68f5a51e0f77eedccc495d61",
						"description": "Lấy thông tin chi tiết của đơn hàng vừa được tạo. Hãy chạy request '1. Create New Order' trước để biến `orderId` được tự động lưu lại."
					},
					"response": []
				},
				{
					"name": "4. Cancel Order (uses ID from Create)",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": "http://localhost:8080/api/order/68f5a484dbd1db1f8a8565ef/cancel",
						"description": "Hủy đơn hàng vừa được tạo (chỉ hoạt động khi trạng thái là 'pending'). Hãy chạy request '1. Create New Order' trước."
					},
					"response": []
				},
				{
					"name": "VNPAY Return (Callback Simulation)",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/api/order/vnpay_return?vnp_ResponseCode=00&vnp_TxnRef=",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"order",
								"vnpay_return"
							],
							"query": [
								{
									"key": "vnp_ResponseCode",
									"value": "00"
								},
								{
									"key": "vnp_TxnRef",
									"value": ""
								}
							]
						},
						"description": "**Lưu ý:** API này rất khó để test trực tiếp trên Postman vì `vnp_SecureHash` cần được tạo ra một cách chính xác. Request này chỉ dùng để mô phỏng cấu trúc URL mà VNPAY sẽ gọi về.\n\nĐể test thực tế, bạn phải tạo đơn hàng VNPAY, thanh toán trên sandbox, và VNPAY sẽ tự động gọi về URL này trên server của bạn."
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "TOKEN",
			"value": ""
		}
	]
}